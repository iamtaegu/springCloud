# springCloud
스프링 클라우드 코딩 공작소 (2판)

## 마이크로서비스 애플레케이션 구축 기술 
 * 스프링 클라우드
 * 스프링 부트
 * 스웨거
 * 도커
	* 지속적으로 출시하고 통합할 수 있는 자체 빌드 및 배포 파이프라인 구축 
 * 쿠버네티스
 * ELK 스택
 * 그라파나
 * 프로메테우스
 
## 스프링 부트 
 * 스프링 프레임워크를 재구성한 것인데
 * 스프링의 핵심 기능은 수용하고, 불필요한 엔터프라이즈 제품은 걷어냈음
 * 자바 기반의 REST 지향 프레임워크를 제공하며
 * 애너테이션 기반으로 패키징하고 배포할 수 있는 REST 서비스를 신속히 만들 수 있게 함 

## EC2 
 * newgrp docker
 
## 도커
 * aws 2022-webservice에 설치
 
## ELK

 * 서비스 기동 시 bootstrap.yml > config.uri를 인식 못하고
    * 파일 분리
    * docker-compose-0 > 1 > 2 > docker-compoe.yml (default) 순서

## chapter9

 * 키클록은 다양한 데이터베이스와 함께 사용할 수 있고, 예제는 임베디드 H2 데이터베이스를 사용 
 * 작업 내용
   1. 키클록 서비스에서 사용할 spmia-realm 생성
   2. 클라이언트 애플리케이션 등록
      * 클라이언트는 사용자 인증을 요청할 수 있는 개체
      * 클라이언트는 SSO 솔루션으로 보호하려는 애플리케이션인 경우임 
   3. realm roles(영역 역할) 생성
      * 선택적 단계로 각 사용자에 대한 역할을 더 잘 통제할 수 있음
      * 이러한 역할을 생성하지 않으려면 사용자를 직접 생성하면 됨 
   4. 사용자 구성
      * Users 메뉴에서 사용자 이름을 입력하고, 사용자 및 이메일 확인 옵션을 활성화
 * 액세스 토큰을 획득하려는 사용자 시뮬레이션
   1. 키클록 토큰 엔드포인트에 POST 호출할 때 애플리케이션, 시크릿 키, 사용자 ID와 패스워드를 전달

 * Keycloak을 사용하면서 개인정보를 처리할 수 있는 방법
   1. JWT 및 Redis 기반 세션 관리
   2. KeyCloak Token Exchange 및 사용자 정보 조회
   3. API 게이트웨이에서 사용자 정보 캐싱
